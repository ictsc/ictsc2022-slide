---
marp: true
theme: ictsc
paginate: true
---

# ひとこと解説

---
## トラブルシューターの初仕事
- 問題コード: OMU
- 点数: 250 点
- 難易度: 難しい
- 解説
  - トラブル
    - OSPFの導入により `pc` から `srv01`, `srv02` に疎通できなくなった
  - 原因
    - `rt01` において `172.16.40.0/26` について誤ったスタティックルートが設定されている
    - `rt01` と `rt02` で `router-id` が重複している
    - `rt03` においてufwの影響でOSPFパケットが交換できていない

---
## 俺はインターネットの一員になるんだ！
- 問題コード: MZR
- 点数: 250 点
- 難易度: 難しい
- 解説
  - トラブル
    - BGPの経路交換自体は行えているのに疎通ができない
  - 原因
    - トンネル終端アドレスへの経路が、BGPによりトンネル内を経由する経路に上書きされている
    - 「トンネル接続自体の通信がトンネル内を経由する」という矛盾が発生し、トンネル接続が切断
  - 解答例
    - VRFを用いて、トンネル自体の構築に用いるルーティングテーブルと、トランジット接続網への通信に用いるルーティングテーブルを切り分ける

---
## pingが飛ばない
- 問題コード: VZX
- 点数: 50 点
- 難易度: 簡単
- 解説
  - トラブル
    - ホストのルーティング情報が消失している
    - ルータのファイヤーウォールでTCPは許可しているが、ICMPは許可していない
  - 解答例
    - ホストにルーティング情報を付与する
    - 別途 ICMP を許可するようにファイヤーウォールを設定する

---
## データベースに入れない！
- 問題コード: ING
- 点数: 200 点
- 難易度: 普通
- 解説
  - 原因
    - 経路中にあるRouterのファイアウォールでServerへのTCP3306パケットの通信が禁止されている
    - ServerのufwでTCP3306パケットの受信が不許可
    - MySQLサーバーがlocalhostのみをLISTENし、eth1にバインドされていない
    - MySQLのuserユーザーがlocalhostからのログインのみ有効 (`'user'@'localhost'`)

---
## IPv6のDHCP
- 問題コード: GWE
- 点数: 100 点
- 難易度: 普通
- 解説
  - トラブル
    - frrをインストールして、SLAACをする構築問題
  - 解答例
    - dhcp-serverに apt等でfrrをインストールし、
    固定IPを設定、公式ドキュメントのSLAACの設定を入れる
    - clientはIPv6のdhcpをnetplanで有効にする



---
## たかし先輩のK8s作問
- 問題コード: UCT
- 点数: 150 点
- 難易度: 普通
- 解説
  - トラブル
    - K8sにIngressリソースがデプロイできない問題
      kubectlがエラーを出してapplyできない
    - YAMLの仕様で`y`がstringではなく booleanと認識されるため
    - Ingressコントローラーが存在しない
  - 解答例
    - `y`を`"y"`などに書き換え
    - `minikube addons enable ingress`でminikubeのingressプラグインを有効化




---
## 
LWG

---
## 盲点の窓
- 問題コード: RCT
- 点数: 100 点
- 難易度: 普通
- 解説
  - トラブル
    - Nginx のシンボリックリンクを循環参照にしていた
    - `blog.service` のバインドを IP で行っていた
  - 解答例
    - シンボリックを絶対パスに修正する
    - `blog.service` を修正するか Nginx のプロキシ先を修正する

---
## protocが… 見つからない⁉︎
- 問題コード: AJL
- 点数: 300点
- 難易度: 難しい
- 解説
  - protocがglibcに依存しているが、Alpineの標準ライブラリはmusl
    - 想定解法: Alpine上 (musl環境) でprotocをビルドする
    - 別解: gcompat (互換性ライブラリ) をインストールする
  - protocはlibstdc++にも依存しているので、入れる
  - protocのGo用プラグインが入っていないので、入れる
- コメント: C / Linuxに詳しい人は当たりがつく、あまり詳しくない人は原因が謎のまま沼るという感じの問題だったと思う

---

## 答えてくれPingサーバー、ここには<br><div style="text-align: right">userモードとsystemdと、俺がいる！</div>
- 問題コード: DKV
- 点数: 150点
- 難易度: 普通
- 解説
  - userモードのsystemdには`multi-user.target`というユニットが存在しない
    - WantedByを`default.target`に変更する
  - deployスクリプトにenable (自動起動の有効化) が抜けているため、挿入する
  - **deployスクリプトを実行する**
- コメント: 前提条件を破っている / スクリプトの実行を忘れている回答が多かった

---
## 俺自身がDHCPサーバーとなることだ
- 問題コード: WSM
- 点数: 100 点
- 難易度: 簡単
- 解説
  - DHCPサーバーとクライアントを同じインターフェースで同時に動かすと、クライアントによっては自身のDHCP情報を得る
  - DHCPでGW情報を乗っ取られると通信が遮断され、再展開不可避
  - DHCPクライアントを閉じる、メトリックを調整するなどが想定解

---
## 奴の名は
- 問題コード: QVF
- 点数: 点
- 難易度: 普通
- 解説
  - LDAPサーバーは正常だが、クライアント側で設定ができていない
  - `/etc/nsswitch.conf`のpasswdに`LDAP`を追加すれば解決

---
## やらかしたかもしれない...
- 問題コード: LTY
- 点数: 100
- 難易度: 簡単
- 解説
  - rootユーザのログインシェルが制限付きのrbashというものに設定されてしまっていたため、発生した現象
  - ログインシェルをbashなどに設定しなおせば問題なく解決する。

---
## ストレージ消し飛んだ...
- 問題コード: CFB
- 点数: 200
- 難易度: 普通
- 解説
  - バックアップ取得コードを読みながら、ストレージを復元する。
  - 複合、圧縮の展開をした後にzfs側に復元する必要がある。
---
## Beer
- 問題コード: SJQ
- 点数: 200点
- 難易度: 普通
- 解説
  - FRR問
  - rfc8212に関する問題
    - `no bgp ebgp-requires-policy`
    - もしくは、policyを書く
  - +router-idを変更

---
## 魔王様の求人
- 問題コード: AVU
- 点数: 250 点
- 難易度: 難しい
- 解説
  - トラブル
    - k8sにデプロイされたrookのosdが起動しない
    - 起動時にLVが活性化されない
    - ICTSC2023の運営募集をおこなっていた
  - 解答例
    - `sudo apt install lvm2`を全nodeで実行
    - 再起動もしくは`sudo vgchange -a y`を全nodeで行う

---
## オレオレS3
CYA
